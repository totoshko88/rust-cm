# Implementation Plan

- [x] 1. Custom SSH Config File Import
  - [x] 1.1 Add import_from_file method to SshConfigImporter
    - Add method that accepts a Path parameter
    - Reuse existing parsing logic from import()
    - Return ImportResult with parsed connections
    - _Requirements: 1.2, 1.3_
    - Status: Already implemented via import_from_path in ImportSource trait
  - [x] 1.2 Write property test for SSH config parsing
    - **Property 1: SSH Config Parsing Round Trip**
    - **Validates: Requirements 1.2, 1.3**
    - Status: Already implemented in import_tests.rs
  - [x] 1.3 Write property test for invalid SSH config handling
    - **Property 2: Invalid SSH Config Error Handling**
    - **Validates: Requirements 1.4**
    - Status: Already implemented in import_tests.rs
  - [x] 1.4 Add SSH Config File import source to ImportDialog
    - Add new source entry with id ssh_config_file, always available
    - Implement file chooser dialog for ssh config files
    - Call SshConfigImporter import_from_path with selected path
    - Display preview with connection count before import
    - _Requirements: 1.1, 1.5_

- [x] 2. RDP Shared Folder Configuration
  - [x] 2.1 Add SharedFolder struct to rustconn-core models protocol.rs
    - Define struct with local_path PathBuf and share_name String
    - Add serde derive macros for serialization
    - _Requirements: 2.3_
  - [x] 2.2 Update RdpConfig to include shared folders
    - Add shared_folders Vec SharedFolder field
    - Add serde default skip_serializing_if Vec is_empty
    - _Requirements: 2.3_
  - [x] 2.3 Write property test for shared folder CRUD operations
    - **Property 3: Shared Folder CRUD Operations**
    - **Validates: Requirements 2.3, 2.5**
  - [x] 2.4 Update RDP command builder to include shared folder arguments
    - Add drive ShareName path arguments for FreeRDP
    - Handle path escaping for spaces and special characters
    - _Requirements: 2.4_
  - [x] 2.5 Write property test for RDP command builder
    - **Property 4: RDP Command Builder Includes Shared Folders**
    - **Validates: Requirements 2.4**
  - [x] 2.6 Add shared folders UI to connection dialog
    - Add Shared Folders section for RDP connections
    - Implement add remove folder buttons
    - Add directory chooser for local path
    - Add text entry for share name
    - Display folders in list view
    - _Requirements: 2.1, 2.2, 2.5, 2.6_

- [x] 3. Progress Indicators
  - [x] 3.1 Create ProgressReporter trait in rustconn-core
    - Define report current total message method
    - Define is_cancelled method
    - Create CallbackProgressReporter implementation
    - _Requirements: 3.1, 3.3_
  - [x] 3.2 Write property test for progress reporter invocation
    - **Property 5: Progress Reporter Invocation**
    - **Validates: Requirements 3.1, 3.3**
  - [x] 3.3 Update import methods to accept optional ProgressReporter
    - Add progress parameter to ImportSource import
    - Call progress report for each item processed
    - Check progress is_cancelled between items
    - _Requirements: 3.1, 3.5_
  - [x] 3.4 Create ProgressDialog widget in rustconn dialogs
    - Create modal window with progress bar
    - Add status label for current operation
    - Add cancel button for interruptible operations
    - Implement update fraction message method
    - _Requirements: 3.1, 3.2, 3.5, 3.6_
  - [x] 3.5 Integrate progress dialog with import operations
    - Show progress dialog during import
    - Update progress as items are processed
    - Handle cancellation
    - Show summary on completion
    - _Requirements: 3.1, 3.6_

- [ ] 4. Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.

- [x] 5. Split-Screen Terminal Views
  - [x] 5.1 Create SplitDirection enum and TerminalPane struct
    - Define SplitDirection Horizontal and Vertical
    - Create TerminalPane with id container and current_session
    - _Requirements: 4.1, 4.2_
  - [x] 5.2 Create SplitTerminalView struct
    - Define root container and panes collection
    - Share sessions and terminals with TerminalNotebook
    - Track focused pane
    - _Requirements: 4.3, 4.4_
  - [x] 5.3 Write property test for split view structure integrity
    - **Property 6: Split View Structure Integrity**
    - **Validates: Requirements 4.1, 4.2, 4.6**
  - [x] 5.4 Write property test for unified tab list consistency
    - **Property 7: Unified Tab List Consistency**
    - **Validates: Requirements 4.3**
  - [x] 5.5 Implement split method
    - Create new Paned widget with correct orientation
    - Move current content to first child
    - Create new pane for second child
    - Update panes collection
    - _Requirements: 4.1, 4.2_
  - [x] 5.6 Implement close_pane method
    - Remove pane from collection
    - Merge remaining content if only one pane left
    - Update focus to remaining pane
    - _Requirements: 4.6_
  - [x] 5.7 Implement focus_next_pane method
    - Cycle through panes in order
    - Update visual focus indicator
    - _Requirements: 4.8_
  - [x] 5.8 Write property test for focus cycling
    - **Property 8: Focus Cycling Completeness**
    - **Validates: Requirements 4.8**
  - [x] 5.9 Implement show_session method
    - Display selected session in focused pane
    - Update pane current_session
    - _Requirements: 4.4_
  - [x] 5.10 Add keyboard shortcuts for split operations
    - Add Ctrl Shift H for horizontal split
    - Add Ctrl Shift V for vertical split
    - Add Ctrl Shift W to close pane
    - Add Ctrl Tab to cycle focus
    - _Requirements: 4.1, 4.2, 4.6, 4.8_
  - [x] 5.11 Integrate SplitTerminalView with main window
    - Replace TerminalNotebook widget with SplitTerminalView
    - Connect tab selection to show_session
    - Update window actions for split operations
    - _Requirements: 4.3, 4.4, 4.7_

- [x] 6. Final Checkpoint - Ensure all tests pass
  - Ensure all tests pass, ask the user if questions arise.
